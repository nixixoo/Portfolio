<!-- Entry animation overlay -->
@if (showEntryAnimation()) {
<div
  class="fixed inset-0 bg-purple flex items-center justify-center overflow-hidden z-50 transition-opacity duration-800"
  [class.opacity-0]="isAnimationFadingOut()"
  [class.opacity-100]="!isAnimationFadingOut()"
>
  <app-home-animation
    (animationComplete)="onEntryAnimationComplete()"
    (fadeOutStarted)="onAnimationFadeOutStarted()"
  />
</div>
}

<!-- Main content with background and particles -->
<main class="bg-purple w-full min-h-dvh animate-fade-in animate-duration-700">
  <!-- Floating particles background -->
  <app-particles class="absolute w-full h-full inset-0 pointer-events-none"></app-particles>

  <!-- Hero section -->
  <section
    id="home"
    class="relative flex items-center w-full justify-center h-dvh animate-slide-in-bottom animate-delay-300"
  >
    <!-- Hero content -->
    <div class="font-pixel text-center pb-18">
      <p class="text-yellow text-xl mb-3">{{ translate('hero.name') }}</p>
      <h1 class="sm:text-2xl md:text-3xl lg:text-4xl text-white">{{ translate('hero.title') }}</h1>
      <div class="mt-6 bg-yellow text-purple font-pixel px-6 py-3 rounded-full max-w-fit mx-auto">
        <p
          href="mailto:nico.aliaga02@gmail.com"
          class="hover:underline text-xs sm:text-sm md:text-base"
        >
          nico.aliaga02@gmail.com
        </p>
      </div>
    </div>
  </section>

  <!-- About section -->
  <section
    id="about"
    class="bg-purple w-full text-white py-16 animate-slide-in-bottom animate-delay-500"
  >
    <div class="max-w-4xl mx-auto px-4">
      <!-- About section header -->
      <div class="text-center mb-12">
        <h2 class="font-pixel text-yellow text-2xl mb-4">{{ translate('about.title') }}</h2>
        <div class="w-16 h-1 bg-yellow mx-auto"></div>
      </div>

      <!-- About content -->
      <div class="space-y-6 text-center max-w-3xl mx-auto">
        <p class="font-inter text-white text-lg leading-relaxed">
          {{ translate('about.intro') }}
        </p>

        <p class="font-inter text-white/90 text-base leading-relaxed">
          {{ translate('about.description') }}
        </p>

        <!-- Experience section component -->
        <app-experience id="experience"></app-experience>

        <!-- Technology stack section -->
        <div class="mt-16 pt-8 border-yellow/20">
          <!-- Category filter buttons -->
          <div class="flex flex-wrap justify-center gap-3 mb-8">
            <button
              (click)="setCategory('web')"
              [class.bg-yellow]="isCategoryActive('web')"
              [class.text-purple]="isCategoryActive('web')"
              [class.border-yellow]="isCategoryActive('web')"
              [class.text-yellow]="!isCategoryActive('web')"
              [class.border-yellow/50]="!isCategoryActive('web')"
              class="font-pixel text-md px-4 py-2 border-2 hover:bg-yellow hover:text-purple transition-all duration-200 cursor-pointer"
            >
              {{ translate('category.web') }}
            </button>
            <button
              (click)="setCategory('data')"
              [class.bg-yellow]="isCategoryActive('data')"
              [class.text-purple]="isCategoryActive('data')"
              [class.border-yellow]="isCategoryActive('data')"
              [class.text-yellow]="!isCategoryActive('data')"
              [class.border-yellow/50]="!isCategoryActive('data')"
              class="font-pixel text-md px-4 py-2 border-2 hover:bg-yellow hover:text-purple transition-all duration-200 cursor-pointer"
            >
              {{ translate('category.data') }}
            </button>
          </div>

          <h3 
            class="font-pixel text-orange-light text-2xl mb-6 text-center transition-opacity duration-200"
            [class.opacity-0]="transitioning"
            [class.opacity-100]="!transitioning"
          >
            {{ translate('about.techStack') }}
          </h3>
          <!-- Technology badges -->
          <div 
            class="flex flex-wrap justify-center gap-3 transition-opacity duration-200"
            [class.opacity-0]="transitioning"
            [class.opacity-100]="!transitioning"
          >
            @for (tech of uniqueTechnologies(); track tech.name) {
            <div
              class="font-pixel text-xs px-3 py-2 border border-orange-light text-orange-light hover:bg-orange-light hover:text-purple transition-colors cursor-default flex items-center gap-2"
            >
              <span [innerHTML]="tech.sanitizedIcon" class="flex-shrink-0"></span>
              <span>{{ tech.name }}</span>
            </div>
            }
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Projects section -->
  <section
    id="projects"
    class="bg-purple w-full text-white py-16 animate-slide-in-bottom animate-delay-700"
  >
    <div class="max-w-5xl mx-auto px-4">
      <!-- Projects section header -->
      <div 
        class="text-center mb-12 transition-opacity duration-200"
        [class.opacity-0]="transitioning"
        [class.opacity-100]="!transitioning"
      >
        <h2 class="font-pixel text-yellow text-2xl mb-4">{{ translate('projects.title') }}</h2>
        <div class="w-16 h-1 bg-yellow mx-auto mt-4"></div>
      </div>

      <!-- Projects grid -->
      <div 
        class="grid md:grid-cols-2 gap-6 transition-opacity duration-200"
        [class.opacity-0]="transitioning"
        [class.opacity-100]="!transitioning"
      >
        <!-- Loop through projects -->
        @for (project of projectCards(); track project.title) {
        <app-card
          [title]="project.title"
          [description]="project.description"
          [tags]="project.tags"
          [imageUrl]="project.imageUrl"
          [projectId]="project.projectId"
          [githubUrl]="project.githubUrl"
          [liveUrl]="project.liveUrl"
          class="transform hover:-translate-y-2 transition-all duration-200"
        />

        <!-- Empty state when no projects -->
        } @empty {
        <div class="col-span-full text-center py-12">
          <div class="border-2 border-yellow/30 border-dashed p-8">
            <p class="font-pixel text-yellow text-sm mb-2">
              {{ translate('projects.empty.title') }}
            </p>
            <p class="font-inter text-white/70 text-xs">
              {{ translate('projects.empty.description') }}
            </p>
          </div>
        </div>
        }
      </div>
    </div>
  </section>
</main>
